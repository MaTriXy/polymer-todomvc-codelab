<!-- TODO
1. Publish a property "modelId" in the attributes attribute.
2. Create an MDV <template> that stamps out the list of <li is="todo-item">
3. Use an HTML import to bring in td-input.html
4. Update <input id="new-todo"> so it "is" a <td-input>.
5. Create a new todo when the user hits enter on the text box.
6. Fill in addTodoAction()
7. 
   On <input id="new-todo"> add an on-* handler for the following events:
   - "td-input-commit", calls addTodoAction()
   - "td-input-cancel", calls cancelAddTodoAction()
-->

<!-- TODO: Import td-input.html -->
<link rel="import" href="td-item.html">

<!-- TODO: Publish "modelId" -->
<polymer-element name="td-todos">
  <template>
  <link rel="stylesheet" href="td-todos.css">
    <section id="todoapp">
      <header id="header">
        <!-- TODO: make this a input a specialized <td-input>. -->
        <input id="new-todo" placeholder="What needs to be done?" autofocus>
      </header>
      <section id="main">
        <ul id="todo-list">
          <!--
            TODO:
            Build a <template> that repeats over the "items" property of <td-model>.
             - Each iteration should render a <li is="td-item"></li>.
             - On each <li>, bind an attribute named "item" to each iteration's current value.
          -->
        </ul>
      </section>
    </section>
  </template>
  <script>
    var ENTER_KEY = 13;
    var ESC_KEY = 27;
    Polymer('td-todos', {
      modelIdChanged: function() {
        this.model = document.querySelector('#' + this.modelId);
      },
      addTodoAction: function() {
        // TODO ------------------------------------------------------------
        // Create a new todo by using <td-model>'s newItem() method.
        // Pass it <input id="new-todo">.value,
        // Hint: Use automatic node finding
        // (http://www.polymer-project.org/polymer.html#automatic-node-finding)
        // to fetch <input id="new-todo"> from the DOM.
        // -----------------------------------------------------------------

        Platform.flush();
        this.$['new-todo'].value = '';
      },
      cancelAddTodoAction: function() {
        this.$['new-todo'].value = '';
      }
    });
  </script>
</polymer-element>
